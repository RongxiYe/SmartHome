{"version":3,"sources":["webpack:///./src/components/Family.vue?112d","webpack:///src/components/Family.vue","webpack:///./src/components/Family.vue?6732","webpack:///./src/components/Family.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","size","slot","_v","_s","familyID","postcode","address","_e","staticStyle","tableData","prop","order","formatter","ref","createForm","rules","model","value","callback","$$v","$set","expression","on","$event","submitCreateForm","bindForm","submitBindForm","staticRenderFns","name","data","famliyID","hasFamily","noFamily","mounted","getFamilyInfo","methods","$axios","get","then","showClose","message","type","$refs","formName","validate","component"],"mappings":"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","file":"js/chunk-2d0c11d3.503a29e0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"family\"}},[(_vm.hasFamily)?_c('el-descriptions',{staticClass:\"margin-top\",attrs:{\"title\":\"Family info\",\"column\":3,\"size\":_vm.size,\"border\":\"\"}},[_c('el-descriptions-item',[_c('template',{slot:\"label\"},[_c('i',{staticClass:\"el-icon-user\"}),_vm._v(\" ID \")]),_vm._v(\" \"+_vm._s(_vm.familyID)+\" \")],2),_c('el-descriptions-item',[_c('template',{slot:\"label\"},[_c('i',{staticClass:\"el-icon-info\"}),_vm._v(\" Postcode \")]),_vm._v(\" \"+_vm._s(_vm.postcode)+\" \")],2),_c('el-descriptions-item',[_c('template',{slot:\"label\"},[_c('i',{staticClass:\"el-icon-office-building\"}),_vm._v(\" address \")]),_vm._v(\" \"+_vm._s(_vm.address)+\" \")],2)],1):_vm._e(),(_vm.hasFamily)?_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"default-sort\":{prop: 'userName', order: 'descending'},\"empty-text\":\"No member\"}},[_c('el-table-column',{attrs:{\"prop\":\"userName\",\"label\":\"name\",\"sortable\":\"\",\"width\":\"500\"}}),_c('el-table-column',{attrs:{\"prop\":\"phoneNum\",\"label\":\"phone\",\"formatter\":_vm.formatter}})],1):_vm._e(),(_vm.noFamily)?_c('el-form',{ref:\"createForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.createForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"address\",\"prop\":\"address\",\"required\":\"\"}},[_c('el-input',{model:{value:(_vm.createForm.address),callback:function ($$v) {_vm.$set(_vm.createForm, \"address\", $$v)},expression:\"createForm.address\"}})],1),_c('el-form-item',{attrs:{\"label\":\"postcode\",\"prop\":\"postcode\",\"required\":\"\"}},[_c('el-input',{model:{value:(_vm.createForm.postcode),callback:function ($$v) {_vm.$set(_vm.createForm, \"postcode\", $$v)},expression:\"createForm.postcode\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitCreateForm('createForm')}}},[_vm._v(\"Create\")])],1)],1):_vm._e(),(_vm.noFamily)?_c('el-form',{ref:\"bindForm\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.bindForm,\"rules\":_vm.rules,\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"Family ID\",\"prop\":\"familyID\",\"required\":\"\"}},[_c('el-input',{model:{value:(_vm.bindForm.familyID),callback:function ($$v) {_vm.$set(_vm.bindForm, \"familyID\", $$v)},expression:\"bindForm.familyID\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.submitBindForm('bindForm')}}},[_vm._v(\"Bind\")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n<div id=\"family\"><el-descriptions class=\"margin-top\" title=\"Family info\" :column=\"3\" :size=\"size\" border\nv-if=\"hasFamily\"\n>\n  <el-descriptions-item>\n    <template slot=\"label\">\n      <i class=\"el-icon-user\"></i>\n      ID\n    </template>\n    {{ familyID }}\n  </el-descriptions-item>\n  <el-descriptions-item>\n    <template slot=\"label\">\n      <i class=\"el-icon-info\"></i>\n      Postcode\n    </template>\n    {{ postcode }}\n  </el-descriptions-item>\n  <el-descriptions-item>\n    <template slot=\"label\">\n      <i class=\"el-icon-office-building\"></i>\n      address\n    </template>\n    {{ address }}\n  </el-descriptions-item>\n</el-descriptions>\n\n  <el-table\n      :data=\"tableData\"\n      style=\"width: 100%\"\n      :default-sort = \"{prop: 'userName', order: 'descending'}\"\n      empty-text=\"No member\"\n      v-if=\"hasFamily\"\n  >\n    <el-table-column\n        prop=\"userName\"\n        label=\"name\"\n        sortable\n        width=\"500\">\n    </el-table-column>\n    <el-table-column\n        prop=\"phoneNum\"\n        label=\"phone\"\n        :formatter=\"formatter\">\n    </el-table-column>\n  </el-table>\n  <el-form :model=\"createForm\" :rules=\"rules\" ref=\"createForm\" label-width=\"100px\" class=\"demo-ruleForm\"\n  v-if=\"noFamily\"\n  >\n    <el-form-item label=\"address\" prop=\"address\" required>\n      <el-input v-model=\"createForm.address\"></el-input>\n    </el-form-item>\n    <el-form-item label=\"postcode\" prop=\"postcode\" required>\n      <el-input v-model=\"createForm.postcode\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitCreateForm('createForm')\">Create</el-button>\n    </el-form-item>\n    </el-form>\n  <el-form :model=\"bindForm\" :rules=\"rules\" ref=\"bindForm\" label-width=\"100px\" class=\"demo-ruleForm\"\n           v-if=\"noFamily\"\n  >\n    <el-form-item label=\"Family ID\" prop=\"familyID\" required>\n      <el-input v-model=\"bindForm.familyID\"></el-input>\n    </el-form-item>\n    <el-form-item>\n      <el-button type=\"primary\" @click=\"submitBindForm('bindForm')\">Bind</el-button>\n    </el-form-item>\n  </el-form>\n</div>\n\n</template>\n\n<script>\nexport default {\n  name: \"Family\",\n  data () {\n    return {\n      size: '',\n      famliyID:'',\n      address:'',\n      postcode:'',\n      hasFamily:'false',\n      noFamily:'false',\n      tableData: [],\n      createForm: {\n        address: '',\n        postcode:'',\n      },\n      bindForm: {\n        familyID:'',\n      },\n    };\n  },\n  mounted(){\n    this.getFamilyInfo();\n  },\n  methods: {\n    getFamilyInfo:function() {\n      this.$axios.get('/family').then(response=>{\n        if(response.data.data.length===1) {\n          this.hasFamily=false\n          this.noFamily=true\n          this.$message({\n            showClose: true,\n            message: 'You have not bind your family,create one or bind one in this page',\n            type: 'warning',\n          })\n        }else{\n          this.hasFamily=true\n          this.noFamily=false\n          this.familyID = response.data.data[0].familyID;\n          this.postcode = response.data.data[0].postcode;\n          this.address = response.data.data[0].address;\n          this.tableData =response.data.data[1];\n        }\n      })\n          //获取失败\n          .catch(error=>{\n            console.log(error);\n          })\n    },\n    submitCreateForm(formName){\n      this.$refs[formName].validate((valid) => {\n            if (valid) {\n              this.$axios.post('/user/createFamily', {\n                postcode: this.createForm.postcode,\n                address: this.createForm.address,\n              })\n                  .then((response) => {\n                    if(response.data.data.state==='Success'){\n                    this.$message({\n                      showClose: true,\n                      message: 'Create successfully!',\n                      type: 'success'\n                    })\n                      this.$router.go(0)\n                    }\n                    else if(response.data.data.state==='UnknownError'){\n                      this.$message({\n                        showClose: true,\n                        message: 'Creation failed!',\n                        type: 'error'\n                      })\n                    }\n                    console.log(response)\n                  })\n            }\n          }\n          )\n    },\n    submitBindForm(formName){\n      this.$refs[formName].validate((valid) => {\n            if (valid) {\n              this.$axios.post('/user/bindFamily', {\n                familyID: this.bindForm.familyID,\n              })\n                  .then((response) => {\n                    if(response.data.data.state==='Success'){\n                      this.$message({\n                        showClose: true,\n                        message: 'Bind successfully!',\n                        type: 'success'\n                      })\n                      this.$router.go(0)\n                    }\n                    else if(response.data.data.state==='UnknownError'){\n                      this.$message({\n                        showClose: true,\n                        message: 'Bind failed!',\n                        type: 'error'\n                      })\n                    }\n                    else if(response.data.data.state==='WrongFid'){\n                      this.$message({\n                        showClose: true,\n                        message: 'This family ID does not exist!',\n                        type: 'error'\n                      })\n                    }\n                    console.log(response)\n                  })\n            }\n          }\n      )\n    },\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Family.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Family.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Family.vue?vue&type=template&id=4690f09d&scoped=true&\"\nimport script from \"./Family.vue?vue&type=script&lang=js&\"\nexport * from \"./Family.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4690f09d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}