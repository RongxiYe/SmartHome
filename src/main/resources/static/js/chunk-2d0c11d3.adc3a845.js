(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c11d3"],{4551:function(e,a,t){"use strict";t.r(a);var s=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{attrs:{id:"family"}},[e.hasFamily?t("el-descriptions",{directives:[{name:"loading",rawName:"v-loading",value:e.descriptionLoading,expression:"descriptionLoading"}],staticClass:"margin-top",attrs:{title:"Family info",column:3,size:e.size,border:""}},[t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-user"}),e._v(" ID ")]),e._v(" "+e._s(e.familyID)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-info"}),e._v(" Postcode ")]),e._v(" "+e._s(e.postcode)+" ")],2),t("el-descriptions-item",[t("template",{slot:"label"},[t("i",{staticClass:"el-icon-office-building"}),e._v(" address ")]),e._v(" "+e._s(e.address)+" ")],2)],1):e._e(),t("br"),e.hasFamily?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","default-sort":{prop:"userName",order:"descending"},"empty-text":"No member"}},[t("el-table-column",{attrs:{prop:"userName",label:"member name",sortable:"",width:"500"}}),t("el-table-column",{attrs:{prop:"phoneNum",label:"phone",formatter:e.formatter}})],1):e._e(),e.noFamily?t("el-form",{ref:"createForm",staticClass:"demo-ruleForm",attrs:{model:e.createForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"address",prop:"address",required:""}},[t("el-input",{model:{value:e.createForm.address,callback:function(a){e.$set(e.createForm,"address",a)},expression:"createForm.address"}})],1),t("el-form-item",{attrs:{label:"postcode",prop:"postcode",required:""}},[t("el-input",{model:{value:e.createForm.postcode,callback:function(a){e.$set(e.createForm,"postcode",a)},expression:"createForm.postcode"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submitCreateForm("createForm")}}},[e._v("Create")])],1)],1):e._e(),e.noFamily?t("el-form",{ref:"bindForm",staticClass:"demo-ruleForm",attrs:{model:e.bindForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"Family ID",prop:"familyID",required:""}},[t("el-input",{model:{value:e.bindForm.familyID,callback:function(a){e.$set(e.bindForm,"familyID",a)},expression:"bindForm.familyID"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.submitBindForm("bindForm")}}},[e._v("Bind")])],1)],1):e._e()],1)},o=[],i={name:"Family",data:function(){return{size:"",famliyID:"",address:"",postcode:"",hasFamily:!1,noFamily:!1,tableData:[],tableLoading:!0,descriptionLoading:!0,createForm:{address:"",postcode:""},bindForm:{familyID:""}}},mounted:function(){this.getFamilyInfo()},methods:{getFamilyInfo:function(){var e=this;setTimeout((function(){e.tableLoading=!1,e.descriptionLoading=!1}),2e3),this.$axios.get("/family").then((function(a){console.log(a),1===a.data.data.length?(e.hasFamily=!1,e.noFamily=!0,e.$message({showClose:!0,message:"You have not bind your family,create one or bind one in this page",type:"warning"})):(e.hasFamily=!0,e.noFamily=!1,e.familyID=a.data.data[0].familyID,e.postcode=a.data.data[0].postcode,e.address=a.data.data[0].address,e.tableData=a.data.data[1])})).catch((function(e){console.log(e)}))},submitCreateForm:function(e){var a=this;this.$refs[e].validate((function(e){e&&a.$axios.post("/user/createFamily",{postcode:a.createForm.postcode,address:a.createForm.address}).then((function(e){"Success"===e.data.data.state?(a.$message({showClose:!0,message:"Create successfully!",type:"success"}),setTimeout((function(){a.$router.go(0)}),2e3)):"UnknownError"===e.data.data.state&&a.$message({showClose:!0,message:"Creation failed!",type:"error"}),console.log(e)}))}))},submitBindForm:function(e){var a=this;this.$refs[e].validate((function(e){e&&a.$axios.post("/user/bindFamily",{familyID:a.bindForm.familyID}).then((function(e){"Success"===e.data.data.state?(a.$message({showClose:!0,message:"Bind successfully!",type:"success"}),a.$router.go(0)):"UnknownError"===e.data.data.state?a.$message({showClose:!0,message:"Bind failed!",type:"error"}):"WrongFid"===e.data.data.state&&a.$message({showClose:!0,message:"This family ID does not exist!",type:"error"}),console.log(e)}))}))}}},r=i,l=t("2877"),n=Object(l["a"])(r,s,o,!1,null,"203e0844",null);a["default"]=n.exports}}]);