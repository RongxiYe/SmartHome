(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4559fadc"],{"4cd1":function(a,e,t){},"5ee1":function(a,e,t){"use strict";t("4cd1")},e013:function(a,e,t){"use strict";t.r(e);var r=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"div1"},[t("el-card",{staticClass:"box-card"},[a.hasHardware?t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.tableLoading,expression:"tableLoading"}],attrs:{data:a.tableData,border:"","empty-text":"No hardware in your family"}},[t("el-table-column",{attrs:{prop:"hardwareID",label:"hardware ID"}}),t("el-table-column",{attrs:{prop:"name",label:"name"}}),t("el-table-column",{attrs:{prop:"manufactureName",label:"manufacturer"}}),t("el-table-column",{attrs:{prop:"operation",fixed:"right",label:"",width:"90"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(t){return a.draw(e.row)}},slot:"reference"},[a._v("History")])]}}],null,!1,1118418803)})],1):t("el-empty",{attrs:{description:"You should bind or create your family first!"}})],1),t("br"),a.needBind?t("el-card",{staticClass:"box-card"},[t("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[t("h3",[a._v("BIND NEW HARDWARE HERE:")])]),t("div",[t("el-form",{ref:"bindForm",staticClass:"demo-ruleForm",attrs:{model:a.bindForm,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"Hardware ID",prop:"hardwareID",required:""}},[t("el-input",{model:{value:a.bindForm.hardwareID,callback:function(e){a.$set(a.bindForm,"hardwareID",e)},expression:"bindForm.hardwareID"}})],1),t("el-button",{attrs:{type:"primary"},on:{click:function(e){return a.submitBindForm("bindForm")}}},[a._v("Bind")])],1)],1)]):a._e(),t("el-dialog",{attrs:{title:"RECORD",visible:a.dialogTableVisible,modal:"false"},on:{"update:visible":function(e){a.dialogTableVisible=e}}},[t("el-card",[t("ve-line",{attrs:{data:a.chartData,settings:a.chartSettings}})],1)],1)],1)},s=[],o={name:"Console",data:function(){return{dialogTableVisible:!1,chartSettings:{xAxisType:"time"},chartData:{columns:["time","data"],rows:[]},tableData:[],hasHardware:!1,needBind:!1,noFamily:!1,tableLoading:!0,bindForm:{hardwareID:""}}},mounted:function(){this.getHardwareInfo()},methods:{draw:function(a){this.dialogTableVisible=!0,console.log(a);for(var e=0;e<a.hd.length;++e)this.chartData.rows.push({time:a.hd[e].time,data:a.hd[e].data})},formatData:function(a){var e=a.data;switch(e){case"0":e="closed";break;case"1":e="open";break;case"2":e="alert";break}return e},getHardwareInfo:function(){var a=this;setTimeout((function(){a.tableLoading=!1}),2e3),this.$axios.get("/components/console").then((function(e){console.log(e),"NoFamily"===e.data.data.hasHardware?(a.hasHardware=!1,a.noFamily=!0,a.$message({showClose:!0,message:"You are not a family member! Please go to the family page",type:"error"})):"false"===e.data.data.hasHardware?(a.hasHardware=!1,a.needBind=!0,a.$message({showClose:!0,message:"Your family does not have a hardware, please bind one!",type:"warning"})):"true"===e.data.data.hasHardware&&(a.hasHardware=!0,a.needBind=!0),a.tableData=e.data.data.abs})).catch((function(a){console.log(a)}))},submitBindForm:function(a){var e=this;this.$refs[a].validate((function(a){a&&e.$axios.post("/hard/add",{hardwareID:e.bindForm.hardwareID}).then((function(a){"Success"===a.data.data.state?(e.$message({showClose:!0,message:"Bind successfully!",type:"success"}),setTimeout((function(){e.$router.go(0)}),2e3)):"Failed"===a.data.data.state?e.$message({showClose:!0,message:"Bind failed!",type:"error"}):"NoSuchHardID"===a.data.data.state?e.$message({showClose:!0,message:"This hardware ID does not exist!",type:"error"}):"hasOwner"===a.data.data.state&&e.$message({showClose:!0,message:"This hardware is already bound to a family!",type:"error"}),console.log(a)}))}))}}},n=o,i=(t("5ee1"),t("2877")),l=Object(i["a"])(n,r,s,!1,null,"2b48621e",null);e["default"]=l.exports}}]);