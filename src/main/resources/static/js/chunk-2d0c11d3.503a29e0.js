(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c11d3"],{4551:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"family"}},[e.hasFamily?a("el-descriptions",{staticClass:"margin-top",attrs:{title:"Family info",column:3,size:e.size,border:""}},[a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-user"}),e._v(" ID ")]),e._v(" "+e._s(e.familyID)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-info"}),e._v(" Postcode ")]),e._v(" "+e._s(e.postcode)+" ")],2),a("el-descriptions-item",[a("template",{slot:"label"},[a("i",{staticClass:"el-icon-office-building"}),e._v(" address ")]),e._v(" "+e._s(e.address)+" ")],2)],1):e._e(),e.hasFamily?a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"default-sort":{prop:"userName",order:"descending"},"empty-text":"No member"}},[a("el-table-column",{attrs:{prop:"userName",label:"name",sortable:"",width:"500"}}),a("el-table-column",{attrs:{prop:"phoneNum",label:"phone",formatter:e.formatter}})],1):e._e(),e.noFamily?a("el-form",{ref:"createForm",staticClass:"demo-ruleForm",attrs:{model:e.createForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"address",prop:"address",required:""}},[a("el-input",{model:{value:e.createForm.address,callback:function(t){e.$set(e.createForm,"address",t)},expression:"createForm.address"}})],1),a("el-form-item",{attrs:{label:"postcode",prop:"postcode",required:""}},[a("el-input",{model:{value:e.createForm.postcode,callback:function(t){e.$set(e.createForm,"postcode",t)},expression:"createForm.postcode"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitCreateForm("createForm")}}},[e._v("Create")])],1)],1):e._e(),e.noFamily?a("el-form",{ref:"bindForm",staticClass:"demo-ruleForm",attrs:{model:e.bindForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"Family ID",prop:"familyID",required:""}},[a("el-input",{model:{value:e.bindForm.familyID,callback:function(t){e.$set(e.bindForm,"familyID",t)},expression:"bindForm.familyID"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitBindForm("bindForm")}}},[e._v("Bind")])],1)],1):e._e()],1)},o=[],r={name:"Family",data:function(){return{size:"",famliyID:"",address:"",postcode:"",hasFamily:"false",noFamily:"false",tableData:[],createForm:{address:"",postcode:""},bindForm:{familyID:""}}},mounted:function(){this.getFamilyInfo()},methods:{getFamilyInfo:function(){var e=this;this.$axios.get("/family").then((function(t){1===t.data.data.length?(e.hasFamily=!1,e.noFamily=!0,e.$message({showClose:!0,message:"You have not bind your family,create one or bind one in this page",type:"warning"})):(e.hasFamily=!0,e.noFamily=!1,e.familyID=t.data.data[0].familyID,e.postcode=t.data.data[0].postcode,e.address=t.data.data[0].address,e.tableData=t.data.data[1])})).catch((function(e){console.log(e)}))},submitCreateForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$axios.post("/user/createFamily",{postcode:t.createForm.postcode,address:t.createForm.address}).then((function(e){"Success"===e.data.data.state?(t.$message({showClose:!0,message:"Create successfully!",type:"success"}),t.$router.go(0)):"UnknownError"===e.data.data.state&&t.$message({showClose:!0,message:"Creation failed!",type:"error"}),console.log(e)}))}))},submitBindForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$axios.post("/user/bindFamily",{familyID:t.bindForm.familyID}).then((function(e){"Success"===e.data.data.state?(t.$message({showClose:!0,message:"Bind successfully!",type:"success"}),t.$router.go(0)):"UnknownError"===e.data.data.state?t.$message({showClose:!0,message:"Bind failed!",type:"error"}):"WrongFid"===e.data.data.state&&t.$message({showClose:!0,message:"This family ID does not exist!",type:"error"}),console.log(e)}))}))}}},i=r,l=a("2877"),n=Object(l["a"])(i,s,o,!1,null,"4690f09d",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0c11d3.503a29e0.js.map